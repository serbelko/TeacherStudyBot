# strings.py

LANG_STRINGS = {
    "ru": {
        # –°—Ç–∞—Ä—Ç–æ–≤–æ–µ –º–µ–Ω—é, –∫–Ω–æ–ø–∫–∏
        "start_text": "–ü—Ä–∏–≤–µ—Ç! –Ø –∫—Ä—É—Ç–æ–π –±–æ—Ç. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /create, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å, –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:",
        "faq_btn": "–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã",
        "scenarios_btn": "–ú–æ–∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏",
        "top_users_btn": "–¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
        "back_btn": "–ù–∞–∑–∞–¥",
        "main_menu_btn": "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",

        # FAQ
        "faq_text": """1. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π?
–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É /create –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–∏—è–º –±–æ—Ç–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–≤–µ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç, –∫–ª–∞—Å—Å —É—á–µ–Ω–∏–∫–æ–≤, —Ç–µ–º—É —É—Ä–æ–∫–∞, —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ (–±–∞–∑–æ–≤—ã–π/–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∞—Å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

2. –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–æ –¥—Ä—É–≥–æ–π —Ç–µ–º–µ?
–ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–ø–∏—Å–∞—Ç—å —Ç–µ–º—É —É—Ä–æ–∫–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑ :)""",

        # –°—Ü–µ–Ω–∞—Ä–∏–∏: –∫–Ω–æ–ø–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è
        "no_scenarios_yet": "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ ^_^",
        "choose_scenario": "–í—ã–±–µ—Ä–∏ —Å–≤–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π",
        "no_next_page": "–ë–æ–ª—å—à–µ –Ω–µ–∫—É–¥–∞",
        "no_prev_page": "–ú–µ–Ω—å—à–µ –Ω–µ–∫—É–¥–∞",

        # –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        "photo_message": "–í—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é:",

        # –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è
        "subject_question": "üìö –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç:",
        "class_question": "üë©‚Äçüéì –í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å:",
        "theme_question": "üíº –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É —É—Ä–æ–∫–∞:",
        "level_question": "üë©‚Äçüè´ –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:",
        "time_question": "üï∞ –í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —É—Ä–æ–∫:",
        "desc_question": "‚úçÔ∏è –í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ —É—Ä–æ–∫–∞",

        "level_base_btn": "–ë–∞–∑–æ–≤—ã–π",
        "level_profile_btn": "–ü—Ä–æ—Ñ–∏–ª—å–Ω—ã–π",

        "back_subject_btn": "–ù–∞–∑–∞–¥ –∫ –ø—Ä–µ–¥–º–µ—Ç—É",
        "back_class_btn": "–ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É –∫–ª–∞—Å—Å–∞",
        "back_level_btn": "–ù–∞–∑–∞–¥ –∫ —É—Ä–æ–≤–Ω—é",
        "back_time_btn": "–ù–∞–∑–∞–¥ –∫–æ –≤—Ä–µ–º–µ–Ω–∏",
        "back_theme_btn": "–ù–∞–∑–∞–¥ –∫ —Ç–µ–º–µ",

        "you_chose_subject": "üìö –í—ã –≤—ã–±—Ä–∞–ª–∏ –ø—Ä–µ–¥–º–µ—Ç: {subject}",
        "you_chose_class": "üë©‚Äçüéì –í—ã –≤—ã–±—Ä–∞–ª–∏ –∫–ª–∞—Å—Å: {school_class}",
        "you_chose_theme": "üíº –í—ã –≤—ã–±—Ä–∞–ª–∏ —Ç–µ–º—É —É—Ä–æ–∫–∞: {theme}",
        "you_chose_level": "üë©‚Äçüè´ –£—Ä–æ–≤–µ–Ω—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏: {level}",
        "you_chose_time": "üï∞ –í—Ä–µ–º—è –Ω–∞ —É—Ä–æ–∫: {time}",
        "you_chose_desc": "‚úçÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞: {desc}",

        "scenario_generating": "–ó–∞–≥—Ä—É–∑–∫–∞...",
        "scenario_created": "–°—Ü–µ–Ω–∞—Ä–∏–π —Å–æ—Ö—Ä–∞–Ω—ë–Ω!",
    },
    "en": {
        # Start menu, buttons
        "start_text": "Hello! I'm a cool bot. Enter /create to start or choose an option:",
        "faq_btn": "FAQ",
        "scenarios_btn": "My scenarios",
        "top_users_btn": "Top users",
        "back_btn": "Back",
        "main_menu_btn": "Main menu",

        # FAQ
        "faq_text": """1. How to create a new scenario?
Use the /create command and follow the bot instructions. You must provide the subject, class, lesson topic, difficulty level (basic/advanced), and the amount of spare time.

2. What if the bot generates a scenario for the wrong topic?
Try to describe your lesson more thoroughly and try again :)""",

        # Scenarios: messages
        "no_scenarios_yet": "You have no scenarios yet ^_^",
        "choose_scenario": "Choose your scenario",
        "no_next_page": "There's no next page",
        "no_prev_page": "There's no previous page",

        # Photos
        "photo_message": "You sent a photo:",

        # Creating scenario
        "subject_question": "üìö Choose the subject:",
        "class_question": "üë©‚Äçüéì Choose the class:",
        "theme_question": "üíº Enter the lesson topic:",
        "level_question": "üë©‚Äçüè´ Choose the preparation level:",
        "time_question": "üï∞ Enter the lesson duration:",
        "desc_question": "‚úçÔ∏è Enter the lesson description:",

        "level_base_btn": "Basic",
        "level_profile_btn": "Advanced",

        "back_subject_btn": "Back to subject",
        "back_class_btn": "Back to class",
        "back_level_btn": "Back to level",
        "back_time_btn": "Back to time",
        "back_theme_btn": "Back to topic",

        "you_chose_subject": "üìö Subject chosen: {subject}",
        "you_chose_class": "üë©‚Äçüéì Class chosen: {school_class}",
        "you_chose_theme": "üíº Topic chosen: {theme}",
        "you_chose_level": "üë©‚Äçüè´ Level: {level}",
        "you_chose_time": "üï∞ Lesson duration: {time}",
        "you_chose_desc": "‚úçÔ∏è Lesson description: {desc}",

        "scenario_generating": "Loading...",
        "scenario_created": "Scenario saved!",
    }
}


# src/helpers.py

from config.db_session import SessionLocal
from src.repo.db import UserRepository

# –ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω–Ω–µ–∫—Ç –∫ –ë–î:
db = SessionLocal()
user_repo = UserRepository(db)

def get_localized_text(user_id: str, key: str, **kwargs) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ LANG_STRINGS –ø–æ –∫–ª—é—á—É `key` —Å —É—á—ë—Ç–æ–º —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    –ï—Å–ª–∏ —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–ª–æ–≤–∞—Ä–µ, –≤–µ—Ä–Ω—ë—Ç—Å—è —Ä—É—Å—Å–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç.
    –ú–æ–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ format, –ø–µ—Ä–µ–¥–∞–≤ –∏—Ö –∫–∞–∫ **kwargs.
    """
    lang_code = user_repo.get_language_by_id(user_id)  # "ru" –∏–ª–∏ "en"
    if lang_code not in LANG_STRINGS:
        lang_code = "ru"

    text_template = LANG_STRINGS[lang_code].get(key, "")
    # –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä {subject}), –∏—Å–ø–æ–ª—å–∑—É–µ–º .format(**kwargs)
    if kwargs:
        return text_template.format(**kwargs)
    return text_template
